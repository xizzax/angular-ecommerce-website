"use strict";(self.webpackChunkecommerce_website=self.webpackChunkecommerce_website||[]).push([[898],{1898:(N,_,c)=>{c.r(_),c.d(_,{CartModule:()=>P});var u=c(6814),f=c(2129);function h(n,o,i,e,r,a,m){try{var d=n[a](m),l=d.value}catch(B){return void i(B)}d.done?o(l):Promise.resolve(l).then(e,r)}var s=c(6825),g="https://js.stripe.com/v3",y=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,v="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",p=null,C=Promise.resolve().then(function(){return o=null,null!==p||(p=new Promise(function(i,e){if(typeof window>"u")i(null);else if(window.Stripe&&o&&console.warn(v),window.Stripe)i(window.Stripe);else try{var r=function(){for(var o=document.querySelectorAll('script[src^="'.concat(g,'"]')),i=0;i<o.length;i++){var e=o[i];if(y.test(e.src))return e}return null}();r&&o?console.warn(v):r||(r=function(o){var i=o&&!o.advancedFraudSignals?"?advancedFraudSignals=false":"",e=document.createElement("script");e.src="".concat(g).concat(i);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(e),e}(o)),r.addEventListener("load",function(){window.Stripe?i(window.Stripe):e(new Error("Stripe.js not available"))}),r.addEventListener("error",function(){e(new Error("Failed to load Stripe.js"))})}catch(a){return void e(a)}})),p;var o}),b=!1;C.catch(function(n){b||console.warn(n)});var t=c(4769),j=c(2623),A=c(9862),J=c(9229);let E=(()=>{var n;class o{constructor(){this.subtract_from_cart=new t.vpe,this.add_to_cart=new t.vpe,this.remove_from_cart=new t.vpe,this.isHovered=!1}toggleHover(){this.isHovered=!this.isHovered}add_to_cart_child(e){console.log(e),this.add_to_cart.emit(e)}subtract_from_cart_child(e){this.subtract_from_cart.emit(e)}remove_from_cart_child(e){this.remove_from_cart.emit(e)}}return(n=o).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart-item"]],inputs:{item:"item"},outputs:{subtract_from_cart:"subtract_from_cart",add_to_cart:"add_to_cart",remove_from_cart:"remove_from_cart"},decls:16,vars:12,consts:[[1,"gradient","flex","flex-wrap","justify-around","items-center","bg-indigo-100","hover:bg-indigo-500","hover:text-white","rounded-xl","mb-5","py-2","transition","duration-300","ease-out",3,"mouseenter","mouseleave"],["alt","",1,"w-16","h-16","object-cover","bg-indigo-200","rounded-full",3,"src"],[1,"w-28","truncate"],[1,"flex","items-center","gap-1"],[1,"w-6","h-6","border-2","bg-transparent","rounded-full","text-sm",3,"click"],[1,"w-8","h-8","cursor-pointer"],["alt","",1,"object-cover","text-white",3,"src","click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.NdJ("mouseenter",function(){return r.toggleHover()})("mouseleave",function(){return r.toggleHover()}),t._UZ(1,"img",1),t.TgZ(2,"h1",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return r.subtract_from_cart_child(r.item)}),t._uU(6," - "),t.qZA(),t.TgZ(7,"h1"),t._uU(8),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return r.add_to_cart_child(r.item)}),t._uU(10," + "),t.qZA()(),t.TgZ(11,"h1"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"div",5)(15,"img",6),t.NdJ("click",function(){return r.remove_from_cart_child(r.item)}),t.qZA()()()),2&e&&(t.Q6J("@fadeIn",void 0),t.xp6(1),t.s9C("src",r.item.iceCream.imgurl,t.LSH),t.xp6(2),t.Oqu(r.item.iceCream.name),t.xp6(2),t.Tol(r.isHovered?"border-white text-white":"border-indigo-500 text-indigo-600"),t.xp6(3),t.Oqu(r.item.quantity),t.xp6(1),t.Tol(r.isHovered?"border-white text-white":"border-indigo-500 text-indigo-600"),t.xp6(3),t.Oqu(t.lcZ(13,10,r.item.iceCream.price)),t.xp6(3),t.Q6J("src",r.isHovered?"assets/closewhite.svg":"assets/close.svg",t.LSH))},dependencies:[u.H9],data:{animation:[(0,s.X$)("fadeIn",[(0,s.eR)(":enter",[(0,s.oB)({transform:"translate3d(-10px,-10px,0)",opacity:0}),(0,s.jt)("0.25s",(0,s.oB)({transform:"translate3d(0,0,0)",opacity:1}))])])]}}),o})();function M(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"app-cart-item",11),t.NdJ("add_to_cart",function(r){t.CHM(i);const a=t.oxw();return t.KtG(a.add_to_cart(r))})("subtract_from_cart",function(r){t.CHM(i);const a=t.oxw();return t.KtG(a.subtract_from_cart(r))})("remove_from_cart",function(r){t.CHM(i);const a=t.oxw();return t.KtG(a.remove_from_cart(r))}),t.qZA()}2&n&&t.Q6J("item",o.$implicit)}const k=[{path:"",component:(()=>{var n;class o{constructor(e,r,a){this.service=e,this.http=r,this.toastr=a,this.isHovered=!1,this.currentCart=[],this.total=0,this.currentCart=e.getCart()}ngOnInit(){console.log("on init is called"),console.log(this.service.getTotal()),this.total=this.service.getTotal()}toggleHover(){this.isHovered=!this.isHovered}add_to_cart(e){this.service.addToCart(e.iceCream),this.total=this.service.getTotal(),this.currentCart=this.service.getCart(),this.toastr.success("Quantity increased")}subtract_from_cart(e){this.service.subtractFromCart(e.iceCream),this.total=this.service.getTotal(),this.currentCart=this.service.getCart(),this.toastr.error("Quantity decreased")}remove_from_cart(e){this.service.removeFromCart(e.iceCream),this.total=this.service.getTotal(),this.currentCart=this.service.getCart(),this.toastr.success(`${e.iceCream.name} removed from cart`)}clearCart(){this.service.clearCart(),this.total=this.service.getTotal(),this.currentCart=this.service.getCart(),this.toastr.error("Cart cleared")}onCheckout(){this.http.post("http://localhost:4242/checkout",{items:this.currentCart}).subscribe(function(){var e=function w(n){return function(){var o=this,i=arguments;return new Promise(function(e,r){var a=n.apply(o,i);function m(l){h(a,e,r,m,d,"next",l)}function d(l){h(a,e,r,m,d,"throw",l)}m(void 0)})}}(function*(r){console.log(r),(yield function(){for(var o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];b=!0;var r=Date.now();return C.then(function(a){return function(o,i,e){if(null===o)return null;var r=o.apply(void 0,i);return function(o,i){!o||!o._registerWrapper||o._registerWrapper({name:"stripe-js",version:"1.35.0",startTime:i})}(r,e),r}(a,i,r)})}("pk_test_51NizL3HRBepfNKBjiXJ2aD0Dqc5njzjFDrLLFrso06bZX54gZi9EJ7BM7D3qhdFgZ8gNTQB48lLmX6KLCg1yRqpl002EXtrYe1"))?.redirectToCheckout({sessionId:r.id})});return function(r){return e.apply(this,arguments)}}(),e=>{console.log("HTTP Error:",e.error),this.toastr.error("HTTP Error in checkout")})}}return(n=o).\u0275fac=function(e){return new(e||n)(t.Y36(j.N),t.Y36(A.eN),t.Y36(J._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-cart"]],decls:16,vars:8,consts:[[1,"grid","grid-cols-10","min-h-screen","max-sm:h-max","items-container"],[1,"col-span-6","max-md:col-span-10","mx-3","max-sm:h-max"],[1,"flex","flex-col"],[1,"text-4xl","my-3"],[3,"item","add_to_cart","subtract_from_cart","remove_from_cart",4,"ngFor","ngForOf"],[1,"flex","justify-end","max-sm:justify-center","mb-5"],[1,"rounded-2xl","glass","w-max","px-2","py-2"],[1,"btn","btn-primary","border-none","bg-indigo-500","hover:bg-indigo-600","w-2/6","mx-auto",3,"disabled","click"],[1,"btn","mt-2","btn-primary","border-none","bg-indigo-500","hover:bg-indigo-600","w-2/6","mx-auto",3,"disabled","click"],[1,"col-span-4","max-md:col-span-10","h-full","mx-auto","max-md:mt-5"],["src","assets/ice.png","alt","",1,"object-cover","lg:h-full","max-lg:h-5/6"],[3,"item","add_to_cart","subtract_from_cart","remove_from_cart"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"Cart Items"),t.qZA(),t.YNc(5,M,1,1,"app-cart-item",4),t.TgZ(6,"div",5)(7,"h1",6),t._uU(8),t.ALo(9,"currency"),t.qZA()(),t.TgZ(10,"button",7),t.NdJ("click",function(){return r.onCheckout()}),t._uU(11," CheckOut "),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return r.clearCart()}),t._uU(13," Clear Cart "),t.qZA()()(),t.TgZ(14,"div",9),t._UZ(15,"img",10),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("@itemsAnimation",void 0),t.xp6(3),t.Q6J("ngForOf",r.currentCart),t.xp6(3),t.hij(" Total: ",t.lcZ(9,6,r.total.toFixed(2))," "),t.xp6(2),t.Q6J("disabled",0===r.currentCart.length),t.xp6(2),t.Q6J("disabled",0===r.currentCart.length),t.xp6(2),t.Q6J("@slideInfromRight",void 0))},dependencies:[u.sg,E,u.H9],styles:['.items-container[_ngcontent-%COMP%]{color:#4c5cbf;font-family:Inter,sans-serif;font-family:Nunito,sans-serif;font-weight:700}.gradient[_ngcontent-%COMP%]{position:relative;background-image:linear-gradient(to right,#8e98f8c3,#edd8f1ef);z-index:1}.gradient[_ngcontent-%COMP%]:before{position:absolute;content:"";inset:0;background-image:linear-gradient(to left,#8e98f8c3,#edd8f1ef);z-index:-1;transition:opacity 1s linear;opacity:0;border-radius:.75rem}.gradient[_ngcontent-%COMP%]:hover:before{opacity:1;border-radius:.75rem;animation:_ngcontent-%COMP%_fadeIn 2.25s infinite alternate}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}'],data:{animation:[(0,s.X$)("itemsAnimation",[(0,s.eR)("* => *",[(0,s.IO)("@fadeIn",[(0,s.EY)(200,[(0,s.pV)()])],{optional:!0})])]),(0,s.X$)("fadeIn",[(0,s.eR)(":enter",[(0,s.oB)({transform:"translate3d(-10px,-10px,0)",opacity:0}),(0,s.jt)("0.25s",(0,s.oB)({transform:"translate3d(0,0,0)",opacity:1}))])]),(0,s.X$)("slideInfromRight",[(0,s.eR)(":enter",[(0,s.oB)({transform:"translate3d(20px, 0px,0)",opacity:0}),(0,s.jt)("0.35s",(0,s.oB)({transform:"translate3d(0,0,0)",opacity:1}))])])]}}),o})()}];let F=(()=>{var n;class o{}return(n=o).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(k),f.Bz]}),o})(),P=(()=>{var n;class o{}return(n=o).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,F]}),o})()}}]);